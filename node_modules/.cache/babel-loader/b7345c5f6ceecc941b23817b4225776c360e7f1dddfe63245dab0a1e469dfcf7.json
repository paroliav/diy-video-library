{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const VideoLibrary=_ref=>{let{onUpdate}=_ref;const[videos,setVideos]=useState([]);const[error,setError]=useState(null);useEffect(()=>{fetchVideos();},[]);const fetchVideos=async()=>{try{const response=await fetch('/.netlify/functions/getVideos');if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();if(Array.isArray(data)){setVideos(data);}else{console.error('Received non-array data:',data);setVideos([]);}}catch(error){console.error('Error fetching videos:',error);setError(error.message);setVideos([]);}};const handleDelete=async id=>{try{await fetch('/.netlify/functions/deleteVideo',{method:'POST',body:JSON.stringify({id})});fetchVideos();if(onUpdate)onUpdate();}catch(error){console.error('Error deleting video:',error);}};if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}const categories=[...new Set(videos.map(video=>video.category))];return/*#__PURE__*/_jsxs(\"div\",{className:\"video-library\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"DIY Video Library\"}),categories.map(category=>/*#__PURE__*/_jsxs(\"div\",{className:\"category\",children:[/*#__PURE__*/_jsx(\"h2\",{children:category}),/*#__PURE__*/_jsx(\"div\",{className:\"video-scroll\",children:videos.filter(video=>video.category===category).map(video=>/*#__PURE__*/_jsxs(\"div\",{className:\"video-card\",children:[video.thumbnail&&/*#__PURE__*/_jsx(\"img\",{src:video.thumbnail,alt:video.title}),/*#__PURE__*/_jsx(\"h3\",{children:video.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Rating: \",video.rating,\"/5\"]}),/*#__PURE__*/_jsx(Link,{to:`/edit/${video.id}`,children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(video.id),children:\"Delete\"})]},video.id))})]},category))]});};export default VideoLibrary;","map":{"version":3,"names":["React","useState","useEffect","Link","jsxs","_jsxs","jsx","_jsx","VideoLibrary","_ref","onUpdate","videos","setVideos","error","setError","fetchVideos","response","fetch","ok","Error","status","data","json","Array","isArray","console","message","handleDelete","id","method","body","JSON","stringify","children","categories","Set","map","video","category","className","filter","thumbnail","src","alt","title","rating","to","onClick"],"sources":["/Users/vivekhome/Projects/diy-video-library/src/components/VideoLibrary.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nconst VideoLibrary = ({ onUpdate }) => {\n  const [videos, setVideos] = useState([]);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchVideos();\n  }, []);\n\n  const fetchVideos = async () => {\n    try {\n      const response = await fetch('/.netlify/functions/getVideos');\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setVideos(data);\n      } else {\n        console.error('Received non-array data:', data);\n        setVideos([]);\n      }\n    } catch (error) {\n      console.error('Error fetching videos:', error);\n      setError(error.message);\n      setVideos([]);\n    }\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      await fetch('/.netlify/functions/deleteVideo', {\n        method: 'POST',\n        body: JSON.stringify({ id }),\n      });\n      fetchVideos();\n      if (onUpdate) onUpdate();\n    } catch (error) {\n      console.error('Error deleting video:', error);\n    }\n  };\n\n  if (error) {\n    return <div>Error: {error}</div>;\n  }\n\n  const categories = [...new Set(videos.map(video => video.category))];\n\n  return (\n    <div className=\"video-library\">\n      <h1>DIY Video Library</h1>\n      {categories.map(category => (\n        <div key={category} className=\"category\">\n          <h2>{category}</h2>\n          <div className=\"video-scroll\">\n            {videos\n              .filter(video => video.category === category)\n              .map(video => (\n                <div key={video.id} className=\"video-card\">\n                  {video.thumbnail && <img src={video.thumbnail} alt={video.title} />}\n                  <h3>{video.title}</h3>\n                  <p>Rating: {video.rating}/5</p>\n                  <Link to={`/edit/${video.id}`}>Edit</Link>\n                  <button onClick={() => handleDelete(video.id)}>Delete</button>\n                </div>\n              ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default VideoLibrary;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}